<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="2022-08-13-WALLET-0001-create-tables" author="adarunova">
        <createTable tableName="person" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="email" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="currency" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="code" type="varchar(5)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="wallet" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="wallet_limit" type="decimal(10,2)">
                <constraints nullable="false"/>
            </column>
            <column name="balance" type="decimal(10,2)">
                <constraints nullable="false"/>
            </column>
            <column name="income" type="decimal(10,2)">
                <constraints nullable="false"/>
            </column>
            <column name="expense" type="decimal(10,2)">
                <constraints nullable="false"/>
            </column>
            <column name="currency_id" type="bigint">
                <constraints foreignKeyName="wallet_currency_currency_id" references="currency(id)" nullable="false"/>
            </column>
            <column name="person_id" type="bigint">
                <constraints foreignKeyName="wallet_person_person_id" references="person(id)" nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="icon" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="url" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="category" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true" startWith="13" >
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="type" type="varchar(7)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="icon_color" type="varchar(7)">
                <constraints nullable="false"/>
            </column>
            <column name="source" type="varchar(6)">
                <constraints nullable="false"/>
            </column>
            <column name="icon_name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="person_id" type="bigint">
                <constraints foreignKeyName="category_person_person_id" references="person(id)" nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="operation" schemaName="public">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="date" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="amount" type="decimal(10,2)">
                <constraints nullable="false"/>
            </column>
            <column name="wallet_id" type="bigint">
                <constraints foreignKeyName="operation_wallet_wallet_id" references="wallet(id)" nullable="false"/>
            </column>
            <column name="category_id" type="bigint">
                <constraints foreignKeyName="operation_category_category_id" references="category(id)" nullable="false"/>
            </column>
        </createTable>

        <createSequence sequenceName="person_seq" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="currency_seq" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="operation_seq" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="category_seq" startValue="13" incrementBy="1"/>
        <createSequence sequenceName="wallet_seq" startValue="1" incrementBy="1"/>
        <createSequence sequenceName="icon_seq" startValue="1" incrementBy="1"/>
    </changeSet>

    <changeSet id="2022-08-15-51-14" author="Aigul Sibgatullina">
        <sqlFile dbms="postgresql" path="init.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="2022-08-15-57-16" author="Aigul Sibgatullina">
        <sqlFile dbms="postgresql" path="init_categories.sql" relativeToChangelogFile="true"/>
    </changeSet>
</databaseChangeLog>
